CONFIG_LOG=y

CONFIG_SPI=y
CONFIG_GPIO=y
CONFIG_DISPLAY=y

# 启用 MIPI DBI for LCD
CONFIG_MIPI_DBI=y
CONFIG_MIPI_DBI_SPI=y

# 启用 LVGL 核心功能
CONFIG_LVGL=y
CONFIG_LV_COLOR_DEPTH_16=y
CONFIG_LV_USE_LABEL=y
CONFIG_LV_USE_BUTTON=y
CONFIG_LV_USE_BAR=y
CONFIG_LV_USE_SLIDER=y
CONFIG_LV_USE_ARC=y
CONFIG_LV_USE_SWITCH=y
CONFIG_LV_USE_CHECKBOX=y
CONFIG_LV_USE_TEXTAREA=y
CONFIG_LV_USE_THEME_DEFAULT=n
CONFIG_LV_USE_LOG=y

# LVGL 性能和稳定性配置
CONFIG_LV_USE_PERF_MONITOR=n
CONFIG_LV_USE_MEM_MONITOR=n
CONFIG_LV_Z_DOUBLE_VDB=y

# 字体配置 - 清晰位图字体
CONFIG_LV_FONT_MONTSERRAT_12=y
CONFIG_LV_FONT_MONTSERRAT_8=y
CONFIG_LV_FONT_MONTSERRAT_18=y
CONFIG_LV_FONT_DEFAULT_MONTSERRAT_8=y
CONFIG_LV_FONT_UNSCII_8=y
CONFIG_LV_FONT_UNSCII_16=y

# 内存和性能优化
CONFIG_LV_Z_MEM_POOL_SIZE=32768
CONFIG_LV_Z_BUFFER_ALLOC_STATIC=y

# 启用复杂绘制以避免警告
CONFIG_LV_DRAW_SW_COMPLEX=y

# 显示器设置 - 确保像素完美，防止花屏
CONFIG_LV_COLOR_16_SWAP=n
CONFIG_LV_USE_ASSERT_STYLE=y

# LVGL 显示缓冲区配置 - 修复花屏问题
CONFIG_LV_Z_VDB_SIZE=25
CONFIG_LV_Z_MEM_POOL_SIZE=32768
CONFIG_LV_Z_MEM_POOL_SYS_HEAP=y
CONFIG_LV_Z_BUFFER_ALLOC_STATIC=y

# LVGL 刷新配置 - 稳定显示
CONFIG_LV_DEF_REFR_PERIOD=30
CONFIG_LV_Z_AUTO_INIT=y
CONFIG_LV_Z_FLUSH_THREAD=y
CONFIG_LV_Z_FLUSH_THREAD_STACK_SIZE=2048

# Shell 配置 - 重新启用Shell和printk重定向并存
CONFIG_SHELL=y
CONFIG_SHELL_BACKENDS=y
CONFIG_SHELL_BACKEND_SERIAL=y
CONFIG_SHELL_PROMPT_UART="esp32s3:~$ "

# 临时启用串口LOG用于调试
CONFIG_LOG_BACKEND_UART=y
CONFIG_LOG_BACKEND_RTT=n

CONFIG_LCD_CONSOLE_MIRROR=y
CONFIG_LCD_CONSOLE_LOG_BUFFER_SIZE=384

# Shell 扩展功能 - 重新启用
CONFIG_SHELL_CMDS=y
CONFIG_SHELL_HISTORY=y
CONFIG_SHELL_HISTORY_BUFFER=128
CONFIG_SHELL_STATS=y

# 控制台和打印重映射 - 简化配置
CONFIG_CONSOLE=y
# CONFIG_CONSOLE_SUBSYS=y
# CONFIG_CONSOLE_HANDLER=y
CONFIG_PRINTK=y
# CONFIG_EARLY_CONSOLE=y

# CRITICAL: Disable LOG_PRINTK to force printk through hooks
CONFIG_LOG_PRINTK=n

# 增加堆栈和内存以支持Shell和Console，防止花屏
CONFIG_MAIN_STACK_SIZE=8192
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=8192
CONFIG_HEAP_MEM_POOL_SIZE=16384

# SPI 驱动稳定性配置
CONFIG_SPI_ASYNC=y
CONFIG_SPI_INIT_PRIORITY=70

# 显示驱动配置
CONFIG_DISPLAY_INIT_PRIORITY=85
